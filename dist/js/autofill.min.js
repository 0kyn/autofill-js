(()=>{var P=Object.create;var k=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty;var v=(a,e,t)=>e in a?k(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var L=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports);var $=(a,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of E(e))!M.call(a,n)&&n!==t&&k(a,n,{get:()=>e[n],enumerable:!(s=T(e,n))||s.enumerable});return a};var V=(a,e,t)=>(t=a!=null?P(N(a)):{},$(e||!a||!a.__esModule?k(t,"default",{value:a,enumerable:!0}):t,a));var g=(a,e,t)=>(v(a,typeof e!="symbol"?e+"":e,t),t);var F=L(()=>{});function p(a,e){return Object.prototype.hasOwnProperty.call(e,a)}function x(a){return Array.isArray(a)?a:[a]}function d(a,e){for(let t=0;t<e.length;t++){let s=e[t];if(a===s)return!0;if(Array.isArray(s)&&d(a,s))return!0}return!1}function S(a,e){return a.slice(0,Math.max(0,e))}function y(a){return typeof a<"u"?(a.split("-").length>1?a.split("-"):a.split("_")).map((t,s)=>(s>0&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t)).join(""):a}function w(a,e){let t=new Set(e);return a.getAttributeNames().every(s=>!t.has(s))}function C(a,e){return!e.includes(a.type)}var o=class{constructor({withPreset:e}){this.withPreset=e,this.withPreset&&this.initPreset()}initPreset(){this.preset={};for(let e in o.data)e!=="location"?this.preset[e]=o.getRandomItem(o.data[e]):this.preset={...this.preset,...o.getRandomItem(o.data.location)};this.preset.name=this.preset.firstname,this.preset.fullname=`${this.preset.firstname} ${this.preset.lastname}`,this.preset.email=this.genPresetEmail(),this.preset.username=this.genPresetUsername(),this.preset.nickname=this.preset.username,this.preset.password=this.genPresetPassword(),this.preset.birthdate=this.genPresetBirthdate(),this.preset.age=this.genPresetAge(),this.preset.url=this.genPresetUrl(),this.preset.datetime=this.genPresetDatetime(),this.preset.date=this.genPresetDate(),this.preset.month=this.genPresetMonth(),this.preset.week=this.genPresetWeek(),this.preset.time=this.genPresetTime()}genPresetEmail(){return`${this.preset.firstname.toLocaleLowerCase()}.${this.preset.lastname.toLocaleLowerCase()}@${this.preset.company.toLocaleLowerCase().replace(/\W/g,"")}.${this.preset.tld}`}genPresetUsername(){return`${this.preset.firstname}_${this.preset.lastname}`.toLowerCase()}genPresetPassword(){let e={a:"4",e:"3",g:"9",i:"1",l:"7",s:"5",z:"2"};return[...`${this.preset.username}_isnotasecurepwd`].map(n=>e[n]??n).map(n=>o.genBool()?n.toLocaleUpperCase():n).join("")}genPresetAge(){return Math.floor((Date.now()-new Date(this.preset.birthdate).getTime())/315576e5)}genPresetUrl(){return`https://www.${this.preset.company.toLocaleLowerCase().replace(/\W/g,"")}.${this.preset.tld}`}genPresetBirthdate(){let s=new Date().getFullYear()-o.genInt(21,100),n=o.genInt(0,11),r=o.genInt(1,31);return new Date(s,n,r).toISOString().split("T")[0]}genPresetDatetime(){return o.getDatetime()}genPresetDate(){return o.getDate(this.preset.datetime)}genPresetMonth(){return o.getMonth(this.preset.datetime)}genPresetWeek(){return o.getWeek(this.preset.datetime)}genPresetTime(){return o.getTime(this.preset.datetime)}searchPreset({type:e,...t}){let s=y(e);for(let n in this.preset)for(let r in t){let i=t[r],l=new RegExp(`^${i}$`,"i");if(i?.length>0&&l.test(n))return this.preset[n]}if(o.mapInputTypePreset[s])return this.preset[o.mapInputTypePreset[s]]}genInputValue(e){let t,s;e.getAttribute("list")?.length>0?s="datalist":e.tagName==="PROGRESS"?s="progress":e.tagName==="METER"?s="meter":s=e.type;let n=o.mapInputTypeStringOption[s]??"string";switch(s){case"select-one":case"select-multiple":t=this.genSelect(e);break;case"checkbox":t=this.genCheckbox(e);break;case"radio":t=this.genRadio(e);break;case"datalist":t=this.genDatalist(e);break;case"range":t=this.genRange(e);break;case"number":t=this.genNumber(e);break;case"progress":t=this.genProgress(e);break;case"meter":t=this.genMeter(e);break;case"date":case"datetime-local":case"month":case"week":case"time":t=this.genDate(e,s);break;case"color":t=this.genColor();break;default:break}if(this.withPreset){let r=o.getAttributesByKeyValue(e),i=this.searchPreset({type:s,...r});typeof i<"u"&&(t=i)}if(typeof t>"u"){let r=e.getAttribute("minlength")?Number.parseInt(e.getAttribute("minlength")):!1,i=e.getAttribute("maxlength")?Number.parseInt(e.getAttribute("maxlength")):!1;t=o.gen(n,{min:r,max:i})}return t}genSelect(e){let t=e.type,n=[...e.querySelectorAll("option")].map((i,l)=>i.value.length>0?l:!1).filter(Boolean),r=n.length;if(t==="select-one")return n[o.genInt(0,n.length-1)];{let i=o.genInt(2,r),l=[];for(;l.length<i;){let c=n[o.genInt(0,r-1)];l.includes(c)||(l=[...l,c])}return l}}genCheckbox(e){if(/\[/g.test(e.getAttribute("name"))){let s=[...document.querySelectorAll(`input[name^=${e.getAttribute("name").split("[")[0]}\\[]`)].map((i,l)=>l),n=o.genInt(1,s.length),r=[];for(;r.length<n;){let i=s[o.genInt(0,s.length-1)];r.includes(i)||(r=[...r,i])}return r}else return o.genBool()}genRadio(e){let t=[...document.querySelectorAll(`[name^=${e.getAttribute("name").split("[")[0]}]`)].map((s,n)=>n);return t[o.genInt(0,t.length-1)]}genDatalist(e){let t=document.querySelectorAll(`datalist#${e.getAttribute("list")} option`);if(t!==null){let s=[...t].map((n,r)=>n.value.length>0?r:!1).filter(Boolean);return s[o.genInt(0,s.length-1)]}}genRange(e){let t=e.getAttribute("min")??0,s=e.getAttribute("max")??100;return o.genInt(t,s)}genNumber(e){let t=e.getAttribute("min")??-1e3,s=e.getAttribute("max")??1e3;return o.genInt(t,s)}genProgress(e){let t=e.getAttribute("max")??100;return o.genInt(0,t)}genMeter(e){return this.genNumber(e)}genDate(e,t="date"){let s=e.getAttribute("min")??"1970-01-01",n=e.getAttribute("max")??"2099-12-31",r;switch(t){case"datetime-local":r=o.genDatetime(s,n);break;case"month":r=o.genMonth(s,n);break;case"week":r=o.genWeek(s,n);break;case"time":r=o.genTime(s,n);break;case"date":r=o.genDate(s,n);break}return r}genColor(){return`#${Math.floor(Math.random()*16777215).toString(16)}`}static parse(e){let t=e.match(/^(\w+)/);if(t){let s=t[1],n=e.split("|"),r={};if(n.length>0)for(let i=0;i<n.length;i++){let l=n[i].split(":");r[l[0]]=l[1]}return o.gen(s,r)}}static gen(e,t){let s="abcdefghijklmnopqrstuvwxyz",r=s+"ABCDEFGHIJKLMNOPQRSTUVWXYZ",i="0123456789",l=" !\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",c=r+i+l,m={string:r,email:s,password:c,digit:i},f=t.min||12,b=t.max||16,h=o.genInt(f,b);t.len=t.len||h,t.chars=m[e];let A="";return e==="email"?A+=o.genEmail(t):t.chars&&(A+=o.genString(t)),A}static genEmail(e){let t=e.len>=5?e.len:5,s=2,n=Math.floor(t/3),r=t-n+s,i="";return i+=o.genString({...e,len:r}),i+="@",i+=o.genString({...e,len:n}),i+=".",i+=o.genString({...e,len:s}),i}static genString(e){let t=e.chars,s=e.len,n="";for(let r=0;r<s;r++)n+=t[Math.floor(Math.random()*t.length)];return n}static getAttributesByKeyValue(e){return["name","id","class"].reduce((n,r)=>{let i=e.getAttribute(r);return typeof i<"u"&&(n[r]=i),n},{})}static genInt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}static genBool(){return Math.random()<.5}static genDateBetween(e,t){return e=e instanceof Date?e:new Date(e),t=t instanceof Date?t:new Date(t),new Date(e.getTime()+Math.random()*(t.getTime()-e.getTime()))}static genDate(e,t){let s=o.genDateBetween(e,t);return o.getDate(o.getDatetime(s))}static genDatetime(e,t){let s=o.genDateBetween(e,t);return o.getDatetime(s)}static genMonth(e,t){return o.getMonth(o.genDate(e,t))}static genWeek(e,t){return o.getWeek(o.genDate(e,t))}static genTime(e,t){return o.getTime(o.genDatetime(e,t))}static getDatetime(e){return typeof e>"u"&&(e=new Date),e.toISOString().split(".")[0]}static getDate(e){return e.split("T")[0]}static getMonth(e){return e=e instanceof Date?e:new Date(e),`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}`}static getWeek(e){return e=e instanceof Date?e:new Date(e),`${e.getFullYear()}-W${o.getWeekNumber(e).toString().padStart(2,"0")}`}static getTime(e){return e.split("T")[1]}static getWeekNumber(e){e=e instanceof Date?e:new Date(e);let t=new Date(e.getFullYear(),0,1),s=Math.floor((e-t)/(24*60*60*1e3));return Math.ceil(s/7)}static getRandomItem(e){return e[Math.floor(Math.random()*e.length)]}},u=o;g(u,"data",{lastname:["Kent","Doe","Bond"],firstname:["Clark","John","James"],location:[{country:"United States of America",countryCode:1,iso:"US/USA",state:"New York",phoneNumber:"012-345-6789",city:"New York City",zipCode:"10016",street:"7985 E 38th St",currency:"US Dollar",tld:"us"},{country:"France",countryCode:33,iso:"FR/FRA",state:"Ile-de-France",phoneNumber:"0123456789",city:"Paris",zipCode:"75008",street:"312 Av. des Champs-\xC9lys\xE9es",currency:"Euro",tld:"fr"},{country:"United Kingdom",countryCode:44,iso:"GB/GBR",state:"London",phoneNumber:"02012347890",city:"London",zipCode:"75008",street:"1578 Willesden St",currency:"Pounds",tld:"uk"}],animal:["Dog","Cat","Bird"],colorString:["Red","Green","Blue"],colorHex:["#ff0000","#00ff00","#0000ff"],music:["Classical","Electro","Blues"],vehicle:["Car","Bicycle","Truck"],company:["Test Inc.","3W Corp","DevIn"],search:["search keyword 1","search keyword 2","search keyword 3"]}),g(u,"mapInputTypePreset",{tel:"phoneNumber",email:"email",color:"colorHex",datetimeLocal:"datetime",time:"time",date:"date"}),g(u,"mapInputTypeStringOption",{text:"string",textarea:"string",email:"email",password:"password"});var O=V(F()),I=class{autofillInfos={author:"0kyn",version:"1.1.2",name:"Autofill.js",github:"https://github.com/0kyn/autofill-js",npm:"https://www.npmjs.com/package/autofill-js"};autofillConfig={autofill:!0,autosubmit:!1,camelize:!1,generate:!1,inputAttributes:["data-autofill","name","id","class"],inputAttributesSkip:[],inputTypesSkip:[],formsSelectors:["form"],inputsSelectors:["input","textarea","select","progress","meter"],maxlength:!1,minlength:!1,overlay:!1,override:!0,random:!1,randomPreset:!1,url:!1};constructor(e,t){this.infos={...this.autofillInfos},this.config={...this.autofillConfig},this.initOptions(e,t),this.hasOptions()&&(this.initFormsOptions(),this.initConfig())}async init(){if(this.config.url){let e=await this.loadFromJson(this.config.url),t={forms:e.forms},s=Object.keys(e.forms);this.config={...this.autofillConfig,...e.config,...this.options},this.config.formsSelectors=s,this.formsOptions=this.mergeJsonFormsOptions(t,this.formsOptions)}return this.hasFormsOptions()&&this.initForms(),this.initDomForms(),this.config.autofill&&this.fill(),this.config.overlay&&new O.default(this).show(),this}async loadFromJson(e){let s=await(await fetch(e)).text();try{return JSON.parse(s)}catch(n){console.error(n)}}mergeJsonFormsOptions(...e){let t={},s=n=>{for(let r in n)p(r,n)&&(Object.prototype.toString.call(n[r])==="[object Object]"?t[r]=this.mergeJsonFormsOptions(t[r],n[r]):t[r]=n[r])};for(let n=0;n<e.length;n++)s(e[n]);return t}initOptions(e,t){typeof e=="object"?this.options=e:this.options=t??{},this.initFormsSelectors(e)}initFormsSelectors(e){typeof e<"u"&&(typeof e=="string"?this.options.formsSelectors=e.split(",").map(t=>t.trim()):Array.isArray(e)?this.options.formsSelectors=e:e.forms?this.options.formsSelectors=Object.keys(e.forms):e.formsSelectors&&this.initFormsSelectors(e.formsSelectors))}initConfig(){for(let e in this.options){let t=this.options[e];p(e,this.autofillConfig)&&(this.config[e]=t)}}initFormsOptions(){let e={};for(let t in this.options){let s=this.options[t];p(t,this.autofillConfig)||(e[t]=s)}Object.keys(e).length>0&&(this.formsOptions=e)}initDomForms(){let e=document.querySelectorAll(this.config.inputsSelectors),t;this.domForms=[];let s=-1;e.forEach(n=>{let r=n.closest("form");(r!==null&&t!==r||r===null&&t!==null)&&(s++,this.domForms[s]={form:r,inputs:[]}),t=r,this.domForms[s].inputs=[...this.domForms[s].inputs,n]})}initForms(){let e={};this.config.formsSelectors.forEach(t=>{let s={};if(this.formsOptions.inputs)s=this.formsOptions.inputs;else if(!this.formsOptions.forms)s=this.formsOptions;else if(this.formsOptions.forms[t]){let n=this.formsOptions.forms[t];e[t]=n,s=n.inputs??n}e[t]={...e[t],inputs:s}}),this.forms=e}getFormConfig(e){let t={...this.forms[e],formSelector:e},s={...this.config,...t};return delete s.inputs,s}submit(e,t=1e3){setTimeout(()=>{let s=new CustomEvent("submit");e.dispatchEvent(s)},t)}fill(){Object.keys(this.domForms).length===0?(console.log("No forms found in the HTML DOM"),console.log("Handle inputs"),this.handleForm(document)):this.domForms.forEach(e=>this.handleForm(e))}handleForm(e){let{form:t,inputs:s}=e,n=this.getFormSelector(t),r=this.config;this.hasFormsOptions()?(r=this.getFormConfig(n),(r.random||typeof n>"u")&&(this.randomInstance=new u({withPreset:r.randomPreset}))):this.randomInstance=new u({withPreset:!0}),s=this.inputsConfigFilter(s,r);let i=this.getDefaultInputs(s),l=this.getFileInputs(s),c=this.getCheckboxesGroup(s),m=this.getRadios(s),f=this.getSelects(s),b=this.getDatalists(s);i.forEach(h=>this.handleDefaultInput(h,r)),l.forEach(h=>this.handleFileInput(h,r)),c.forEach(h=>this.handleCheckboxGroup(h,r)),m.forEach(h=>this.handleRadioGroup(h,r)),f.forEach(h=>this.handleSelect(h,r)),b.forEach(h=>this.handleDatalist(h,r)),r?.autosubmit&&this.submit(t)}getAfValue(e,t){return this.forms[t.formSelector].inputs[e]}getAfKey(e,t){for(let s=0;s<this.config.inputAttributes.length;s++){let n=this.config.inputAttributes[s],r=e.getAttribute(n)??void 0;if(typeof r<"u"){let i=r.split("[")[0];if(typeof this.getAfValue(i,t)<"u")return i;if(t.camelize){let l=y(i);if(typeof this.getAfValue(l,t)<"u")return l}}}}getInputAfValue(e,t){let s;if(this.hasFormsOptions()&&this.hasFormAndInputs(t)){let n=this.getAfKey(e,t);if(typeof n<"u"){s=this.getAfValue(n,t);let r=this.needToGenerate(s,t);r&&(s=u.parse(r))}else t.random&&(s=this.randomInstance.genInputValue(e))}else s=this.randomInstance.genInputValue(e);if(t.minlength){let n=Number.parseInt(e.getAttribute("minlength"));!Number.isNaN(n)&&s.length<n&&(s+=u.gen("string",{len:n-s.length}))}if(t.maxlength){let n=Number.parseInt(e.getAttribute("maxlength"));!Number.isNaN(n)&&s.length>n&&(s=S(s,n))}return s}handleDefaultInput(e,t){if(t.override||e.value.length===0){let s=this.getInputAfValue(e,t);typeof s<"u"&&(e.value=s)}}handleFileInput(e){console.log(e,"I can't handle you for now...")}handleCheckboxGroup(e,t){this.handleCheckboxOrRadioGroups(e,t)}handleRadioGroup(e,t){this.handleCheckboxOrRadioGroups(e,t)}handleCheckboxOrRadioGroups(e,t){let s=e[0];if(!t.override&&typeof e.find(i=>i.checked)<"u")return;x(this.getInputAfValue(s,t)).forEach((r,i)=>{e.forEach((l,c)=>{typeof r=="string"&&l.value===r||typeof r=="number"&&c===r?l.checked=!0:typeof r=="boolean"&&c===i&&(l.checked=r)})})}handleSelect(e,t){let s=e.querySelectorAll("option");if(!t.override&&typeof[...s].find(i=>i.selected)<"u")return;x(this.getInputAfValue(e,t)).forEach(r=>{typeof r=="string"?e.value=r:typeof r=="number"&&(s[r].selected=!0)})}handleDatalist(e,t){if(t.override||e.value.length===0){let s=this.getInputAfValue(e,t);if(typeof s=="string")e.value=s;else if(typeof s=="number"){let n=document.querySelectorAll(`datalist#${e.getAttribute("list")} option`);n!==null&&(e.value=n[s].value)}}}needToGenerate(e,t){let s=/{{\s(.+?)\s}}/;return t.generate&&typeof e=="string"&&s.test(e)?e.match(s)[1]:!1}getFormSelector(e){let t=this.config.formsSelectors;for(let s=0;s<t.length;s++){let n=t[s];if(document.querySelector(n)===e)return n}}getDefaultInputs(e){return e.filter(t=>{let s=["checkbox","radio","file","reset","submit","button"],n=["list"],r=!s.includes(t.type),i=w(t,n);return r&&i})}getFileInputs(e){return e.filter(t=>t.type==="file")}getCheckboxesGroup(e){let t=/(.+)\[/,s=[];for(let n=0;n<e.length;n++){let r=e[n];if(r.type!=="checkbox")continue;let i=r.getAttribute("name");if(i?.match(t)){if(!d(r,s)){let c=new RegExp(`^${i.match(t)[1]}\\[`),m=e.filter(f=>f.type==="checkbox"&&c.test(f.getAttribute("name")));m.length>0&&(s=[...s,[...m]])}}else s=[...s,[r]]}return s}getSelects(e){return e.filter(t=>["select-one","select-multiple"].includes(t.type))}getDatalists(e){return e.filter(t=>t.getAttribute("list")!==null)}getRadios(e){let t=[];for(let s=0;s<e.length;s++){let n=e[s],r=n.getAttribute("name");if(!d(n,t)){let l=e.filter(c=>c.type==="radio"&&c.getAttribute("name")===r);l.length>0&&(t=[...t,[...l]])}}return t}hasOptions(){return typeof this.options<"u"&&Object.keys(this.options).length>0}hasFormsOptions(){return typeof this.formsOptions<"u"}hasFormAndInputs(e){return e&&this.forms[e.formSelector]&&this.forms[e.formSelector].inputs}inputsConfigFilter(e,t){return e.filter(s=>{let n=w(s,t.inputAttributesSkip),r=C(s,t.inputTypesSkip);return n&&r})}},B=(a,e)=>new Promise(t=>{let s=new I(a,e);document.readyState!=="loading"?t(s.init()):document.addEventListener("DOMContentLoaded",()=>{t(s.init())})});window.autofill=B;})();
//# sourceMappingURL=autofill.min.js.map
