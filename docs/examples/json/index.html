<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Autofill.js - JSON Config example</title>
  <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon">

  <!-- bootstrap css -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <!-- custom css -->
  <style>
    pre code {
      border-radius: 15px;
      white-space: break-spaces;
    }
  </style>

  <!-- bootstrap js -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script> -->

  <!-- highlight.js -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/styles/vs2015.min.css">
  <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>

  <!-- needed css for Autofill.js overlay -->
  <link id="js-autofill-css-link" rel="stylesheet" href="../../../dist/css/autofill.css">

  <!-- Autofill.js -->
  <script id="js-autofill-script-src" src="../../../dist/js/autofill.js"></script>


  <script>
    autofill({
      url: 'autofill.json',
      forms: {
        form: {
          inputs: {
            firstname: 'JohnOverridden'
          }
        }
      }
    })
  </script>
</head>

<body class="o-bs">
  <main class="container py-2 js-main">
    <div class="row">
      <!-- main content -->
      <div class="col-lg-12 pe-5 py-2">
        <h1 class="mb-3 text-center">Autofill.js</h1>
        <hr>
        <h2 class="text-center">JSON Config example</h2>
        <pre><code class="language-javascript">autofill({
  url: 'http://127.0.0.1:5500/autofill.json',
  forms: {
    form: {
      inputs: {
        firstname: 'JohnOverridden'
      }
    }
  }
})</code></pre>
        <hr>
        <div class="row mt-5">
          <div class="col-md-6">
            <h3>JSON Config</h3>
            <a href="autofill.json" class="d-block mb-3">autofill.json</a>
            <pre><code class="language-json js-json-conf"></code></pre>
          </div>

          <div class="col-md-6">
            <h3>Default form</h3>
            <form action="">
              <div class="row mb-3 g-3 align-items-center">
                <div class="col-md-2">
                  <label for="name" class="col-form-label">Name</label>
                </div>
                <div class="col-md-10">
                  <input name="name" type="text" class="form-control" id="name">
                </div>
              </div>

              <div class="row mb-3 g-3 align-items-center">
                <div class="col-md-2">
                  <label for="firstname" class="col-form-label">Firstname</label>
                </div>
                <div class="col-md-10">
                  <input name="firstname" type="text" class="form-control" id="firstname">
                </div>
              </div>

              <div class="row mb-3 g-3 align-items-center">
                <div class="col-md-2">
                  <label for="username" class="col-form-label">Username</label>
                </div>
                <div class="col-md-10">
                  <input name="username" type="text" class="form-control" id="username">
                </div>
              </div>

              <div class="row mb-3 g-3 align-items-center">
                <div class="col-md-2">
                  <label for="email" class="col-form-label">Email</label>
                </div>
                <div class="col-md-10">
                  <input name="email" type="email" class="form-control" id="email">
                </div>
              </div>

              <div class="row mb-3 g-3 align-items-center">
                <div class="col-md-2">
                  <label for="select" class="col-form-label">Select</label>
                </div>
                <div class="col-md-10">
                  <select name="select" id="select" class="form-select">
                    <option value="">-- Choose an option --</option>
                    <option value="option1">1</option>
                    <option value="option2">2</option>
                    <option value="option3">3</option>
                  </select>
                </div>
              </div>

              <div class="row mb-3 g-3 align-items-center">
                <div class="col-md-2">
                  <label for="select-multiple" class="col-form-label">Select multiple</label>
                </div>
                <div class="col-md-10">
                  <select id="select-multiple" name="select-multiple" class="form-select" multiple>
                    <option value="">Choose many options</option>
                    <option value="option1">option 1</option>
                    <option value="option2">option 2</option>
                    <option value="option3">option 3</option>
                  </select>
                </div>
              </div>

              <div class="form-check">
                <input class="form-check-input" name="checkbox" type="checkbox" value="" id="checkbox">
                <label class="form-check-label" for="checkbox">
                  Checkme out
                </label>
              </div>

              <div class="mt-3">
                <div class="form-check form-check-inline">
                  <input name="checkbox-multiple[1]" class="form-check-input" type="checkbox" id="checkbox-multiple-1"
                    value="option1">
                  <label class="form-check-label" for="checkbox-multiple1">1</label>
                </div>
                <div class="form-check form-check-inline">
                  <input name="checkbox-multiple[2]" class="form-check-input" type="checkbox" id="checkbox-multiple-2"
                    value="option2">
                  <label class="form-check-label" for="checkbox-multiple-2">2</label>
                </div>
                <div class="form-check form-check-inline">
                  <input name="checkbox-multiple[3]" class="form-check-input" type="checkbox" id="checkbox-multiple-3"
                    value="option3">
                  <label class="form-check-label" for="checkbox-multiple-3">3</label>
                </div>
              </div>

              <div class="mt-3">
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="radio" id="radio-1" value="option1">
                  <label class="form-check-label" for="radio-1">1</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="radio" id="radio-2" value="option2">
                  <label class="form-check-label" for="radio-2">2</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="radio" id="radio-3" value="option3">
                  <label class="form-check-label" for="radio-3">3</label>
                </div>
              </div>

              <div>
                <div class="row mb-3 g-3 align-items-center">
                  <div class="col-md-2">
                    <label for="range" class="col-form-label">Range</label>
                  </div>
                  <div class="col-md-10">
                    <input name="range" type="range" class="form-range" id="range">
                  </div>
                </div>
              </div>
            </form>

            <hr class="my-5">

            <h3>#contact-form (autosubmit)</h3>
            <form id="contact-form" class="js-contact-form" action="">
              <div class="row mb-3 g-3 align-items-center">
                <div class="col-md-2">
                  <label for="contact-email" class="col-form-label">Email</label>
                </div>
                <div class="col-md-10">
                  <input name="email" type="email" class="form-control" id="contact-email">
                </div>
              </div>
              <div class="row mb-3 g-3 align-items-center">
                <div class="col-md-2">
                  <label for="contact-message" class="col-form-label">Message</label>
                </div>
                <div class="col-md-10">
                  <textarea name="message" class="form-control" id="contact-message"
                    data-autofill="password"></textarea>
                </div>
              </div>
              <pre><code class="js-render-submit"></code></pre>
            </form>

            <hr class="my-5">

            <h3>#random-form</h3>
            <form id="random-form">
              <div class="row mb-3 g-3 align-items-center">
                <div class="col-md-2">
                  <label for="random-form-email" class="col-form-label">Email</label>
                </div>
                <div class="col-md-10">
                  <input name="email" type="email" class="form-control" id="random-form-email">
                </div>
              </div>
              <div class="row mb-3 g-3 align-items-center">
                <div class="col-md-2">
                  <label for="random-form-message" class="col-form-label">Message</label>
                </div>
                <div class="col-md-10">
                  <textarea name="message" class="form-control" id="random-form-message"></textarea>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
      (async () => {
        const highlight = (element, code) => {
          element.textContent = code
          window.hljs.highlightElement(element)
        }

        const getUrlContent = async (url) => {
          const response = await fetch(url)
          const content = await (response).text()

          return content
        }

        const handleAutosubmit = () => {
          const contactForm = document.querySelector('.js-contact-form')
          const renderSubmit = contactForm.querySelector('.js-render-submit')
          contactForm.addEventListener('submit', function (e) {
            e.preventDefault()
            let text = ''
            const formData = new FormData(this)
            console.group('%c#contact-form:', 'color: #e74747;', ' auto submitted data')
            text += `# Auto submitted data\n\n`
            for (const pair of formData.entries()) {
              const keyVal = `${pair[0]}: ${pair[1]}`
              text += `${keyVal}\n`
              console.log(`%c${pair[0]}`, 'color: #cf7b3a; font-weight: 600;', pair[1])
            }
            console.groupEnd()

            renderSubmit.textContent = text
          })
        }


        const renderJsonConf = async (url, element) => {
          const conf = await getUrlContent(url)
          highlight(element, conf)
        }

        handleAutosubmit()
        await renderJsonConf('autofill.json', document.querySelector('.js-json-conf'))

      })()
  </script>
</body>

</html>
